{
  "hash": "7a936afffdbdeb75ef71032012893464",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Hands-on Exrecise 4a\"\nauthor: \"Stefanie Felicia\"\ndate: \"May, 6 2025\"\ndate-modified: \"last-modified\"\nexecute: \n  eval: true\n  echo: true\n  warning: false\n  freeze: true\n---\n\n\n\n# Getting Started\n\nObjective of this exercise:\n\n-   Learn about new graphs: ridgeline plot and raincloud plot to plot uncertainty\n\n-   Use ggridge library to plot ridgeline plot and ggdist library to plot raincloud plot\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(ggdist, ggridges, ggthemes,\n               colorspace, tidyverse)\n```\n:::\n\n\n\nThe libraries used in this exercise would be:\n\n-   ggridges: create ridgeline plots in ggplot2\n\n-   ggdist: provide ggplot2 geoms and stats designed for visualizing distribution and uncertainty\n\n-   tidyverse\n\n-   ggthemes\n\n-   colorspace: toolbox for manipulating anf assessing colors and palettes\n\n# Import Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexam <- read_csv(\"Exam_data.csv\")\n```\n:::\n\n\n\n# Graphic Methods to Visualize Distribution\n\n## Ridgeline Plot\n\n![](/images/ridgeline%20plot.png)\n\nMain point:\n\n-   Data visualization technique used to study the distribution of numeric variable for several variable\n\n-   When should to use it: when a variable has 3 to 4 groups or more, and you want to compare the distribution of the groups\n\n-   Note: rank them according to the pattern (e.g. highest to lowest or lowest to highest) to provide better insight\n\n### Plotting using ggridge\n\nThere are 2 methods of plotting ridgeline plot:\n\n-   `geom_ridgeline()`: take height values to draw ridgeline\n\n-   `geom_density_ridges()` : estimate data density to draw ridgeline plot\n\n::: panel-tabset\n## The graph\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands_on_Ex04a_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n## The code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam, \n       aes(x = ENGLISH, \n           y = CLASS)) +\n  geom_density_ridges(\n    scale = 3,\n    rel_min_height = 0.01,\n    bandwidth = 3.4,\n    fill = lighten(\"#7097BB\", .3),\n    color = \"white\"\n  ) +\n  scale_x_continuous(\n    name = \"English grades\",\n    expand = c(0, 0)\n    ) +\n  scale_y_discrete(name = NULL, expand = expansion(add = c(0.2, 2.6))) +\n  theme_ridges()\n```\n:::\n\n\n:::\n\n### Customize Style of Ridgeline Plot\n\nWe can customize the color of the area under the ridgeline plot to be gradient by using `geom_ridgeline_gradient()` or `geom_density_ridge_gradient()`\n\n::: panel-tabset\n## The graph\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands_on_Ex04a_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n## The code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam, \n       aes(x = ENGLISH, \n           y = CLASS,\n           fill = stat(x))) +\n  geom_density_ridges_gradient(\n    scale = 3,\n    rel_min_height = 0.01) +\n  scale_fill_viridis_c(name = \"Temp. [F]\",\n                       option = \"C\") +\n  scale_x_continuous(\n    name = \"English grades\",\n    expand = c(0, 0)\n  ) +\n  scale_y_discrete(name = NULL, expand = expansion(add = c(0.2, 2.6))) +\n  theme_ridges()\n```\n:::\n\n\n:::\n\nWe can also map out probabilities directly to the ridgeline plot using `stat_density_ridges()` ::: panel-tabset \\## The graph\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands_on_Ex04a_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n## The code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam,\n       aes(x = ENGLISH, \n           y = CLASS, \n           fill = 0.5 - abs(0.5-stat(ecdf)))) +\n  stat_density_ridges(geom = \"density_ridges_gradient\", \n                      calc_ecdf = TRUE) +\n  scale_fill_viridis_c(name = \"Tail probability\",\n                       direction = -1) +\n  theme_ridges()\n```\n:::\n\n\n\n:::\n\n::: callout_tip\nAdd `calc_ecdf=TRUE` in the `stat_density_ridges()`\n:::\n\nAdditionally, we can also color the ridgeline plot using quantile with `geom_density_ridges_gradient()` like below.\n\n::: panel-tabset \\## The graph\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands_on_Ex04a_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n## The code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam,\n       aes(x = ENGLISH, \n           y = CLASS, \n           fill = factor(stat(quantile))\n           )) +\n  stat_density_ridges(\n    geom = \"density_ridges_gradient\",\n    calc_ecdf = TRUE, \n    quantiles = 4,\n    quantile_lines = TRUE) +\n  scale_fill_viridis_d(name = \"Quartiles\") +\n  theme_ridges()\n```\n:::\n\n\n\n::: Instead of using quantile number like the graph above, we can also specify the quantiles into ranges like below. ::: panel-tabset \\## The graph\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands_on_Ex04a_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n\n## The code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam,\n       aes(x = ENGLISH, \n           y = CLASS, \n           fill = factor(stat(quantile))\n           )) +\n  stat_density_ridges(\n    geom = \"density_ridges_gradient\",\n    calc_ecdf = TRUE, \n    quantiles = c(0.025, 0.975)\n    ) +\n  scale_fill_manual(\n    name = \"Probability\",\n    values = c(\"#FF0000A0\", \"#A0A0A0A0\", \"#0000FFA0\"),\n    labels = c(\"(0, 0.025]\", \"(0.025, 0.975]\", \"(0.975, 1]\")\n  ) +\n  theme_ridges()\n```\n:::\n\n\n\n::: \\## Raincloud Plot\n\nMain Point:\n\n1.  Data visualization technique designed to provide clear and concise summary of distribution central tendency and spread of dataset\n\n2.  It combines boxplot, density plot and scatterplot to give better insight of data (pattern, e.g. clustering or striation)\n\n    ::: callout_tip\n    When to use ridgeline plot or raincloud plot ?\n\n    -   Ridgeline plot: want to compare the distribution of different groups and is interested in density pattern.\n\n    -   Raincloud plot: want to show individual data point and want to emphasize on the spread and central tendency.\n    :::\n\n    ### Plotting using ggdist\n\n    We will plot using `stat_halfeye()` to plot the half-density, while removing the half-slab by adding these arguments `.width = 0, point_colour = NA` in the `stat_halfeye()` . ::: panel-tabset \\## The graph\n\n\n\n    ::: {.cell}\n    ::: {.cell-output-display}\n    ![](Hands_on_Ex04a_files/figure-html/unnamed-chunk-13-1.png){width=672}\n    :::\n    :::\n\n\n\n    ## The code\n\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    ggplot(exam, \n           aes(x = RACE, \n               y = ENGLISH)) +\n      stat_halfeye(adjust = 0.5,\n                   justification = -0.2,\n                   .width = 0,\n                   point_colour = NA)\n    ```\n    :::\n\n\n\n    :::\n\nNext, we will add the boxplot by adding into the graph: ::: panel-tabset \\## The graph\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands_on_Ex04a_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n\n## The code\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands_on_Ex04a_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n\n::: Next, we will add half-dotplot to show points of each data. ::: panel-tabset\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam, \n       aes(x = RACE, \n           y = ENGLISH)) +\n  stat_halfeye(adjust = 0.5,\n               justification = -0.2,\n               .width = 0,\n               point_colour = NA) +\n  geom_boxplot(width = .20,\n               outlier.shape = NA) +\n  stat_dots(side = \"left\", \n            justification = 1.2, \n            binwidth = .5,\n            dotsize = 2)\n```\n\n::: {.cell-output-display}\n![](Hands_on_Ex04a_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\n\nWe can also flip the graph for better readibility and add theme for better aesthetics.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam, \n       aes(x = RACE, \n           y = ENGLISH)) +\n  stat_halfeye(adjust = 0.5,\n               justification = -0.2,\n               .width = 0,\n               point_colour = NA) +\n  geom_boxplot(width = .20,\n               outlier.shape = NA) +\n  stat_dots(side = \"left\", \n            justification = 1.2, \n            binwidth = .5,\n            dotsize = 1.5) +\n  coord_flip() +\n  theme_economist()\n```\n\n::: {.cell-output-display}\n![](Hands_on_Ex04a_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\n\n# Reference\n\n-   <a href=\"https://blog.dailydoseofds.com/p/ridgeline-plots-an-underrated-gem\">Ridgeline Plots: An Underrated Gem of Data Visualisation</a>\n\n-   <a href=\"https://www.data-to-viz.com/graph/ridgeline.html\">Ridgeline plot</a>\n\n-   <a href=\"https://datatab.net/statistics-calculator/charts/raincloud-plot\">Online Statistics Calculator</a>\n\n-   \n",
    "supporting": [
      "Hands_on_Ex04a_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}